{"name": "test_register[case27]", "status": "broken", "statusDetails": {"message": "AttributeError: 'NoneType' object has no attribute 'status_code'", "trace": "case = {'提取响应字段': None, '数据库断言': None, '期望结果': '{\"code\": 404, \"msg\": \"课程不存在\"}', '用例标题': '更新学生学习状态【正在学习】_无效课程ID', ...}\n\n    @allure.epic('AI家长端项目')\n    @allure.feature('所有模块')\n    @allure.description(\"描述：所有测试模块\")\n    @allure.link(url=\"https://minicourse.test.venhalo.com\", name=\"接口地址\")\n    @allure.severity(allure.severity_level.BLOCKER)\n    @pytest.mark.parametrize('case', case_datas)\n    def test_register(case):\n>       res = send_request(case)\n\ntestcases\\parent\\test_2_all_parent.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncase = {'提取响应字段': None, '数据库断言': None, '期望结果': '{\"code\": 404, \"msg\": \"课程不存在\"}', '用例标题': '更新学生学习状态【正在学习】_无效课程ID', ...}\n\n    def send_request(case):\n        \"\"\"\n        统一发送请求封装\n        :param case: 用例数据\n        :return: 响应结果\n        \"\"\"\n        # 提取所有请求字段\n        case_id = case['用例编号']\n        title = case['用例标题']\n        method = case['请求方法']\n        url = case['请求地址']\n        params = case['请求参数']\n        headers = case['请求头']\n        # 在请求发送、记录请求日志之前做标记识别替换的动作，需要做参数替换有请求地址、请求参数、请求头\n        if isinstance(url, str):\n            url = Template(url).safe_substitute(dic_env)\n        if params:\n            params = Template(params).safe_substitute(dic_env)\n        if headers:\n            headers = Template(headers).safe_substitute(dic_env)\n        logger.info('-----------------------用例开始执行---------------------------')\n        logger.info('-------------------------请求日志---------------------------')\n        logger.info(f'用例编号：{case_id}')\n        logger.info(f'用例标题：{title}')\n        allure.attach(title, '用例标题')\n        logger.info(f'请求方法：{method}')\n        allure.attach(method, '请求方法')\n        logger.info(f'请求地址：{url}')\n        allure.attach(url, '请求地址')\n        if headers:\n            logger.info(f'请求头：{headers}')\n            allure.attach(str(headers), '请求头', allure.attachment_type.TEXT)\n        else:\n            logger.info('当前测试用例的请求头为空')\n        # 请求参数添加到allure报告\n        if params:\n            logger.info(f'请求参数：{params}')\n            allure.attach(params, '请求参数', allure.attachment_type.TEXT)\n        else:\n            logger.info('当前测试用例的请求参数为空')\n        dic_headers = None\n        res = None\n        if headers:\n            dic_headers = json.loads(headers)\n        if method.lower() == 'get' or method.lower() == 'delete':\n            # 兼容get、delete请求参数params为空的情况\n            if params:\n                res = request(method, url, params=json.loads(params), headers=dic_headers)\n            else:\n                res = request(method, url, headers=dic_headers)\n        elif method.lower() == 'post' or method.lower() == 'put':\n            # 判断传参类型，如果Content-Type字段的值是application/json，表明是json传参\n            if 'application/json' in dic_headers['Content-Type']:\n                res = request(method, url, json=json.loads(params), headers=dic_headers)\n            # 如果Content-Type字段的值是application/x-www-form-urlencoded，表明是form表单传参\n            elif 'application/x-www-form-urlencoded' in dic_headers['Content-Type']:\n                res = request(method, url, data=json.loads(params), headers=dic_headers)\n            # 文件上传接口，通过headers指定的情况同时传递Content-Type和Authorization\n            elif 'multipart/form-data' in dic_headers['Content-Type']:\n                # 文件上传接口，通过headers指定的情况同时传递Content-Type和Authorization，指定了Content-Type之后\n                # 默认把requests加的boundary字段的值进行覆盖，实际上传递给后端就没有boundary字段，最终会导致500的问题，去掉Content-Type\n                dic_headers.pop('Content-Type')\n                res = request(method, url, files=eval(params), headers=dic_headers)\n        else:\n            logger.error('当前请求方法不支持')\n        logger.info('-------------------------响应日志---------------------------')\n>       logger.info(f'响应状态码：{res.status_code}')\nE       AttributeError: 'NoneType' object has no attribute 'status_code'\n\ncommon\\base_test.py:103: AttributeError"}, "description": "描述：所有测试模块", "attachments": [{"name": "用例标题", "source": "7f49faf7-612c-4e06-b636-07117001b111-attachment.attach"}, {"name": "请求方法", "source": "8b7a54ef-d3e1-45ac-85b2-ab1ada592f1e-attachment.attach"}, {"name": "请求地址", "source": "4654e947-f37f-4cd4-8922-065900f360b3-attachment.attach"}, {"name": "请求头", "source": "dc38859c-c2cd-48f0-838b-6697b8019b10-attachment.txt", "type": "text/plain"}, {"name": "请求参数", "source": "a7d7e40a-8079-4533-a021-cc0944705650-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case", "value": "{'用例编号': 28, '用例标题': '更新学生学习状态【正在学习】_无效课程ID', '请求方法': 'PATCH', '请求地址': 'https://minicourse.test.venhalo.com/api/v1/situation/start', '请求头': '{\"Content-Type\": \"application/json\", \"Authorization\": \"Bearer ${token}\"}', '请求参数': '{\"minicourseId\": \"invalid_id\"}', '期望结果': '{\"code\": 404, \"msg\": \"课程不存在\"}', '数据库断言': None, '提取响应字段': None}"}], "start": 1758533417984, "stop": 1758533417985, "uuid": "46cc7673-32e9-4014-84a5-0281a568ea1c", "historyId": "e831b760a547e1ff5fd179e5ce87cc39", "testCaseId": "f894bec99670d2ceb6a8fed7011e5671", "fullName": "testcases.parent.test_2_all_parent#test_register", "labels": [{"name": "epic", "value": "AI家长端项目"}, {"name": "feature", "value": "所有模块"}, {"name": "severity", "value": "blocker"}, {"name": "parentSuite", "value": "testcases.parent"}, {"name": "suite", "value": "test_2_all_parent"}, {"name": "host", "value": "DESKTOP-GLFP8VP"}, {"name": "thread", "value": "104384-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.parent.test_2_all_parent"}], "links": [{"type": "link", "url": "https://minicourse.test.venhalo.com", "name": "接口地址"}], "titlePath": ["testcases", "parent", "test_2_all_parent.py"]}