{"uid":"68c633aaa272d5b","name":"test_order[case9]","fullName":"testcases.student.test_6_order#test_order","historyId":"7914bfed53afa0a39cfb5a54ecca1248","time":{"start":1758523052258,"stop":1758523052349,"duration":91},"description":"描述：订单模块","descriptionHtml":"<p>描述：订单模块</p>\n","status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}', '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '用例标题': '查询订单支付状态', ...}\n\n>   ???\n\nD:\\Pycharm-Workspace\\api_auto-master\\testcases\\shop\\test_6_order.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncase = {'提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}', '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '用例标题': '查询订单支付状态', ...}\nres = <Response [200]>\n\n    def assert_res(case, res):\n        \"\"\"\n        统一响应断言封装\n        :param case: 用例数据\n        :param res: 接口响应\n        :return: 没有返回\n        \"\"\"\n        # 获取期望结果\n        case_expect = case['期望结果']\n        if case_expect:\n            logger.info('-------------------------断言日志---------------------------')\n            dic = json.loads(case_expect)\n            # 遍历期望结果字典，k：响应字段，v：期望结果\n            for k, v in dic.items():\n                # 响应状态码断言\n                if k == 'status_code':\n                    assert res.status_code == v\n                    logger.info(f'响应状态码断言，期望值：{v}，实际值：{res.status_code}')\n                # 响应文本断言，完全相等\n                elif k == 'text':\n>                   assert res.text == v\nE                   AssertionError\n\ncommon\\base_test.py:137: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1758523042709,"stop":1758523042744,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"teardown_class","time":{"start":1758523042744,"stop":1758523042744,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0,"attachmentStep":false},{"name":"setup_class","time":{"start":1758523042744,"stop":1758523042744,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"testStage":{"description":"描述：订单模块","status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}', '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '用例标题': '查询订单支付状态', ...}\n\n>   ???\n\nD:\\Pycharm-Workspace\\api_auto-master\\testcases\\shop\\test_6_order.py:21: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncase = {'提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}', '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '用例标题': '查询订单支付状态', ...}\nres = <Response [200]>\n\n    def assert_res(case, res):\n        \"\"\"\n        统一响应断言封装\n        :param case: 用例数据\n        :param res: 接口响应\n        :return: 没有返回\n        \"\"\"\n        # 获取期望结果\n        case_expect = case['期望结果']\n        if case_expect:\n            logger.info('-------------------------断言日志---------------------------')\n            dic = json.loads(case_expect)\n            # 遍历期望结果字典，k：响应字段，v：期望结果\n            for k, v in dic.items():\n                # 响应状态码断言\n                if k == 'status_code':\n                    assert res.status_code == v\n                    logger.info(f'响应状态码断言，期望值：{v}，实际值：{res.status_code}')\n                # 响应文本断言，完全相等\n                elif k == 'text':\n>                   assert res.text == v\nE                   AssertionError\n\ncommon\\base_test.py:137: AssertionError","steps":[],"attachments":[{"uid":"1979cb1686d93e7c","name":"用例标题","source":"1979cb1686d93e7c.attach","type":"text/plain","size":24},{"uid":"9bb1d2a65c5be6d2","name":"请求方法","source":"9bb1d2a65c5be6d2.attach","type":"text/plain","size":3},{"uid":"ec39e4ce68be8f21","name":"请求地址","source":"ec39e4ce68be8f21.attach","type":"text/plain","size":59},{"uid":"c8b568784378c282","name":"请求头","source":"c8b568784378c282.txt","type":"text/plain","size":62},{"uid":"f7c5fb1bba1518fd","name":"响应状态码","source":"f7c5fb1bba1518fd.txt","type":"text/plain","size":3},{"uid":"cb7dcef8d5b1fa50","name":"响应时间","source":"cb7dcef8d5b1fa50.txt","type":"text/plain","size":11},{"uid":"62b30810844b5f5a","name":"响应头","source":"62b30810844b5f5a.txt","type":"text/plain","size":531},{"uid":"483e5299bdf84b32","name":"响应体","source":"483e5299bdf84b32.txt","type":"text/plain","size":5}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":8,"hasContent":true,"stepsCount":0,"attachmentStep":false},"afterStages":[{"name":"teardown_class::0","time":{"start":1758523052355,"stop":1758523052392,"duration":37},"status":"passed","steps":[],"attachments":[{"uid":"b6d14979e976e363","name":"fixture后置处理","source":"b6d14979e976e363.txt","type":"text/plain","size":18}],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"stepsCount":0,"attachmentStep":false},{"name":"setup_class::0","time":{"start":1758523052397,"stop":1758523052397,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0,"attachmentStep":false}],"labels":[{"name":"feature","value":"订单模块"},{"name":"severity","value":"blocker"},{"name":"epic","value":"AI学生端项目"},{"name":"parentSuite","value":"testcases.student"},{"name":"suite","value":"test_6_order"},{"name":"host","value":"DESKTOP-GLFP8VP"},{"name":"thread","value":"99452-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcases.student.test_6_order"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'用例编号': 10, '用例标题': '查询订单支付状态', '请求地址': 'http://shop.lemonban.com:8107/p/order/isPay/${order_number}', '请求方法': 'GET', '请求头': '{\"Authorization\":\"bearer${token}\"}', '请求参数': None, '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}'}"}],"links":[{"name":"接口地址","url":"http://shop.lemonban.com:8107/login","type":"link"}],"hidden":false,"retry":false,"extra":{"severity":"blocker","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"68c633aaa272d5b.json","parameterValues":["{'用例编号': 10, '用例标题': '查询订单支付状态', '请求地址': 'http://shop.lemonban.com:8107/p/order/isPay/${order_number}', '请求方法': 'GET', '请求头': '{\"Authorization\":\"bearer${token}\"}', '请求参数': None, '期望结果': '{\"status_code\":200,\"text\":\"true\"}', '提取响应字段': None, '数据库断言': '{\"select status from tz_order where order_number =\\'${order_number}\\';\":2}'}"]}